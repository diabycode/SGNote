{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}
    <title>students/marks</title>
{% endblock %}


{% block body_content %}
    <h3>Notes des étudiants</h3>
    <h4>
        <a href="{% url 'marks_and_results:add_marks' %}">Saisir des notes</a>
    </h4>

    <h4>Rechercher</h4>
    <form action="{% url 'marks_and_results:students_marks' %}" method="GET">

        {% render_field form.faculty hx-get="/marks_and_results/module_dropdown/" hx-trigger="change" hx-target="#id_module" %}
        {% render_field form.module hx-get="/marks_and_results/lesson_dropdown/" hx-trigger="change" hx-target="#id_lesson" %}
        {% render_field form.lesson %}
        {% render_field form.academic_year hx-get="/marks_and_results/semester_dropdown/" hx-trigger="change" hx-target="#id_semester" %}
        {% render_field form.semester %}

        <input type="submit" value="valider">
    </form>

    {% if max_len %}
        <table border=".5px" id="students_marks">
            <thead>
                <tr>
                    <td>N°</td>
                    <td>Nom et prénom</td>
                    <td colspan="{{max_len}}">Notes</td>
                </tr>
            </thead>
            <tbody>
                {% for mark in marks %}
                    <tr>
                        <td> {{ forloop.counter }} </td>
                        <td> {{ mark.student }} </td>
                        {% for m in mark.mark_types %}
                            <td> {{ m }} </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}

        <p>Aucune note trouvé</p>

    {% endif %}

{% endblock %}
